<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Ajax9</title>
</head>
<body>
	<input type="button" value="发送POST请求" id='btn'>
	<ul id="ul0"></ul>
</body>
<script>
	(function(w){
		function ajax(method,url,data,fnSucc,fnFaild){
			var oAjax=new XMLHttpRequest();
			if(method=="POST"){
				oAjax.open(method,url,true);
				oAjax.setRequestHeader("Content-type","application/x-www-form-urlencoded");
				oAjax.send(data);
			}else{
				if(data){
					url=url+"?"+data;
				}
				oAjax.open(method,url,true);
				oAjax.send();
			}

			oAjax.onreadystatechange=function(){
				if(oAjax.readyState==4){
					if(oAjax.status==200){
						fnSucc(oAjax.responseText);
					}else{
						if(fnFaild){
							fnFaild(oAjax.status);
						}
					}
				}
			}
		}
		w.ajax=ajax;
	})(window);
	var oBtn=document.getElementById('btn');
	var oUl=document.getElementById('ul0');
	oBtn.onclick=function(){
		ajax('GET','http://127.0.0.1:3000/file.json',"",
		function(val){
			console.log('get file success ::',val)
		});
	}
</script>
</html>