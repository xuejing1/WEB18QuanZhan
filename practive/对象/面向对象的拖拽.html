<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>面向对象的拖拽</title>
	<style type="text/css">
		*{
			margin:0px;
			padding: 0px;
		}
		#box{
			width: 100px;
			height: 100px;
			background: red;
			position: absolute;
			top: 0;
			left: 0;
		}
	</style>
	<script type="text/javascript">
		window.onload=function(){
			new Drag({width:100,height:100,background:yellow});
			new Drag({width:100,height:100,background:yellow}),;
		}
		function Drag(ev){
			this.oBox=document.createElement('div');
			this.disX=0;
			this.DisY=0;
			var _self=this;

			body.appendChild('oBox');
			oBox.style.width='100px';
			oBox.style.height='100px';
			oBox.style.background='yellow';
			this.oBox.onmousedown=function(){
				_self.fnDown();
			}
		}
		Drag.prototype.fnDown=function(ev){
			var oEvent=ev || event;
			this.disX=oEvent.clientX-this.oBox.offsetLeft;
			this.disY=oEvent.clientY-this.oBox.offsetTop;
			document.onmousemove=this.fnMove.bind(this);
			document.onmouseup=this.fnUp;	
		}
		Drag.prototype.fnMove=function(ev){
			var oEvent=ev || event;
			this.oBox.style.left=oEvent.clientX-this.disX+"px";
			this.oBox.style.top=oEvent.clientY-this.disY+"px";			
		}
		Drag.prototype.fnUp=function(){
			document.onmousemove=null;
			document.onmouseup=null;
		}
		function LimitDrag(option){
			Drag.call(this,option)
		}
		LimitDrag.prototype=Object.create(Drag.prototype)
		LimitDrag.prototype.constructor=LimitDrag;
		LimitDrag.prototype.fnshow=function(ev){
			var oEvent=ev||event;
			var l=oEvent.clientX-this.disX;
			var t=oEvent.clientY-this.disY;
			if(l<0){
				l=0;
			}else if(l>window.innerWidth-oBox.offsetWidth){
				l=window.innerWidth-oBox.offsetWidth;
			}
			if(t<0) {
				t=0;
			}else if(t>window.innerHeight-oBox.offsetHeight){
				t=window.innerHeight-oBotx.offsetHeight;
			}
		}
	</script>
</head>
<body>
	<!-- <div id="box"></div> -->
</body>
</html>